pro write_regfile,filename,ra,dec,rad,color,rad2=rad2,annulus=annulus
  
  if n_params() eq 0 then begin
     print,'syntax - write_regfile,filename,ra,dec,rad,color'
     return
  endif 
  
  if n_params() lt 5 then color='green' else begin
     sep=str_sep(color,'!')
     sep=sep[1]
     color=sep
  endelse 
  openw,lun,filename,/get_lun
  
  printf,lun,'# Region file format: DS9 version 3.0'
  printf,lun,'# Filename: '
  printf,lun,'global color='+color+' font="helvetica 10 normal" select=1 edit=1 move=1 delete=1 include=1 fixed=0 source'
  if not keyword_set(annulus) then printf,lun,'fk5;circle('+ntostr(ra)+','+ntostr(dec)+','+ntostr(rad)+')' else $
     printf,lun,'fk5;annulus('+ntostr(ra)+','+ntostr(dec)+','+ntostr(rad2)+','+ntostr(rad)+')'
  close,lun
  free_lun,lun
  
  return
end 
